---
id: btdig
name: BTDigg
description: BTDigg is a BitTorrent DHT search engine that indexes content by crawling the distributed hash table
type: public
language: en-US
encoding: UTF-8
requestdelay: 2

links:
  - https://btdig.com

legacylinks:
  - https://btdig.com

caps:
  modes:
    search: [q]
    movie-search: [q]
    tv-search: [q]
  categories:
    '2000': Movies
    '5000': TV
    '3000': Audio
    '4000': PC
    '7000': Books
    '8000': Other
  categorymappings:
    - id: '1'
      cat: '8000'
      desc: Other
      default: true

search:
  paths:
    - path: /search
      method: get
      inputs:
        q: '{{ .Keywords }}'
        order: 0
        p: 0
    - path: /search
      method: get
      inputs:
        q: '{{ .Keywords }}'
        order: 0
        p: 1

  rows:
    selector: div.one_result

  fields:
    title:
      selector: div.torrent_name a
    details:
      selector: div.torrent_name a
      attribute: href
    infohash:
      selector: div.torrent_name a
      attribute: href
      filters:
        - name: regexp
          args: '/([a-fA-F0-9]{40})'
    download:
      selector: div.torrent_name a
      attribute: href
      filters:
        - name: regexp
          args: '/([a-fA-F0-9]{40})'
        - name: prepend
          args: 'magnet:?xt=urn:btih:'
    size:
      selector: span.torrent_size
      filters:
        - name: parsesize
    date:
      selector: span.torrent_age
      filters:
        - name: timeago
    seeders:
      text: '0'
    leechers:
      text: '0'
    category:
      text: '1'

download:
  selectors:
    - selector: a[href^="magnet:"]
      attribute: href
  before:
    path: '{{ .Result.details }}'
